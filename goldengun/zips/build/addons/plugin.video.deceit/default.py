import base64;exec base64.b64decode('IyAtKi0gY29kaW5nOiB1dGYtOCAtKi0KIiIiCiAgICBkZWZhdWx0LnB5IC0tLSBKZW4gQWRkb24gZW50cnkgcG9pbnQKICAgIENvcHlyaWdodCAoQykgMjAxNywgSmVuCgogICAgVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnkKICAgIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5CiAgICB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvcgogICAgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi4KCiAgICBUaGlzIHByb2dyYW0gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCwKICAgIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mCiAgICBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlCiAgICBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLgoKICAgIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlCiAgICBhbG9uZyB3aXRoIHRoaXMgcHJvZ3JhbS4gIElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi4KIiIiCmltcG9ydCBfX2J1aWx0aW5fXwoKIyBDT05GSUdVUkFUSU9OIFZBUklBQkxFUwojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiMgY2hhbmdlIHRoZXNlIHRvIHN1aXQgeW91ciBhZGRvbnMKcm9vdF94bWxfdXJsID0gImh0dHA6Ly9kZWNlaXRhZGRvbi5jby51ay9YbWxzL01haW5YbWwvbWFpbi54bWwiICAjIHVybCBvZiB0aGUgcm9vdCB4bWwgZmlsZQpfX2J1aWx0aW5fXy50dmRiX2FwaV9rZXkgPSAiMEQ4NTZERDU3MjgyNDlGOSIgICMgdHZkYiBhcGkga2V5Cl9fYnVpbHRpbl9fLnRtZGJfYXBpX2tleSA9ICJmOTc3NDFhOGE1Y2M5NzhhZWUxYmI4NDE0MmQxZGFiOSIgICMgdG1kYiBhcGkga2V5Cl9fYnVpbHRpbl9fLnRyYWt0X2NsaWVudF9pZCA9ICIyY2EyYjBkZGJmZDc5YjU5MDViOGVhNTYwNzkwZjdiZjAwYTA1OGU1ODA1Mjk5ZjQ0MmVkMWQ5NzMxNjFkZjlhIiAgIyB0cmFrdCBjbGllbnQgaWQKX19idWlsdGluX18udHJha3RfY2xpZW50X3NlY3JldCA9ICJhYTc2YTVkM2FiMDExMWU3ZjExMzAwN2E0ZDAyNDQwZGE3NDhiZmJmMTUxNjg3NzczN2FiYWRkMDg0OGYwYmIyIiAgIyB0cmFrdCBjbGllbnQgc2VjcmV0Cl9fYnVpbHRpbl9fLnNlYXJjaF9kYl9sb2NhdGlvbiA9ICIiICAjIGxvY2F0aW9uIG9mIHNlYXJjaCBkYgoKaW1wb3J0IG9zCmltcG9ydCBzeXMKCmltcG9ydCBrb2RpbmcKaW1wb3J0IGtvZGluZy5yb3V0ZXIgYXMgcm91dGVyCmZyb20gcmVzb3VyY2VzLmxpYi5pbnN0YWxsYSBpbXBvcnQgRGlhbG9nX3NwZWNpZmljCmZyb20gcmVzb3VyY2VzLmxpYi5uZXdzX3dpbmRvdyBpbXBvcnQgRGlhbG9nX0V4YW1wbGUKaW1wb3J0IHJlc291cmNlcy5saWIuc2VhcmNoCmltcG9ydCByZXNvdXJjZXMubGliLnNvdXJjZXMKaW1wb3J0IHJlc291cmNlcy5saWIudGVzdGluZ3MKaW1wb3J0IHJlc291cmNlcy5saWIudXRpbC5pbmZvCmltcG9ydCB4Ym1jCmltcG9ydCB4Ym1jYWRkb24KaW1wb3J0IHhibWNwbHVnaW4KZnJvbSBrb2RpbmcgaW1wb3J0IHJvdXRlCmZyb20gcmVzb3VyY2VzLmxpYi51dGlsLnhtbCBpbXBvcnQgSmVuTGlzdCwgZGlzcGxheV9saXN0CmltcG9ydCByZXNvdXJjZXMubGliLnV0aWwudmlld3MKZnJvbSByZXNvdXJjZXMubGliLnBsdWdpbnMgaW1wb3J0ICoKZnJvbSBsYW5ndWFnZSBpbXBvcnQgZ2V0X3N0cmluZyBhcyBfCmZyb20gcmVzb3VyY2VzLmxpYi5wbHVnaW4gaW1wb3J0IHJ1bl9ob29rCgoKYWRkb25faWQgPSB4Ym1jYWRkb24uQWRkb24oKS5nZXRBZGRvbkluZm8oJ2lkJykKYWRkb25fbmFtZSA9IHhibWNhZGRvbi5BZGRvbigpLmdldEFkZG9uSW5mbygnbmFtZScpCmhvbWVfZm9sZGVyID0geGJtYy50cmFuc2xhdGVQYXRoKCdzcGVjaWFsOi8vaG9tZS8nKQphZGRvbl9mb2xkZXIgPSBvcy5wYXRoLmpvaW4oaG9tZV9mb2xkZXIsICdhZGRvbnMnKQphcnRfcGF0aCA9IG9zLnBhdGguam9pbihhZGRvbl9mb2xkZXIsIGFkZG9uX2lkKQpjb250ZW50X3R5cGUgPSAiZmlsZXMiCm93bkFkZG9uID0geGJtY2FkZG9uLkFkZG9uKGlkPWFkZG9uX2lkKQplbmFibGVfaW5zdGFsbGEgPSBvd25BZGRvbi5nZXRTZXR0aW5nKCdkbGltYWdlJykKZW5hYmxlX25ld3N3aW4gPSBvd25BZGRvbi5nZXRTZXR0aW5nKCduZXdzX3dpbicpCgpAcm91dGUoIm1haW4iKQpkZWYgcm9vdCgpOgogICAgIiIicm9vdCBtZW51IG9mIHRoZSBhZGRvbiIiIgogICAgaWYgZW5hYmxlX25ld3N3aW4gPT0gJ3RydWUnOgogICAgICAgIGtvZGluZy5BZGRfRGlyKG5hbWU9J0xhdGVzdCBOZXdzIEFuZCBVcGRhdGVzJywgdXJsPSd7Im15X3RleHQiOiJMYXRlc3QgTmV3c1tDUl0hISEiLCJteV9kZXNjIjoiIn0nLCBtb2RlPSdkaWFsb2dfZXhhbXBsZScsIGZvbGRlcj1GYWxzZSwgaWNvbj1vcy5wYXRoLmpvaW4oYXJ0X3BhdGgsJ2ljb24ucG5nJyksIGZhbmFydD1vcy5wYXRoLmpvaW4oYXJ0X3BhdGgsJ2ZhbmFydC5qcGcnKSkKICAgIGlmIG5vdCBnZXRfbGlzdChyb290X3htbF91cmwpOgogICAgICAgIGtvZGluZy5BZGRfRGlyKAogICAgICAgICAgICBuYW1lPV8oIk1lc3NhZ2UiKSwKICAgICAgICAgICAgdXJsPV8oIlNvcnJ5LCBzZXJ2ZXIgaXMgZG93biIpLAogICAgICAgICAgICBtb2RlPSJtZXNzYWdlIiwKICAgICAgICAgICAgZm9sZGVyPVRydWUsCiAgICAgICAgICAgIGljb249eGJtY2FkZG9uLkFkZG9uKCkuZ2V0QWRkb25JbmZvKCJpY29uIiksCiAgICAgICAgICAgIGZhbmFydD14Ym1jYWRkb24uQWRkb24oKS5nZXRBZGRvbkluZm8oImZhbmFydCIpLAogICAgICAgICAgICBjb250ZW50X3R5cGU9IiIpCiAgICAgICAga29kaW5nLkFkZF9EaXIoCiAgICAgICAgICAgIG5hbWU9XygiU2VhcmNoIiksCiAgICAgICAgICAgIHVybD0iIiwKICAgICAgICAgICAgbW9kZT0iU2VhcmNoIiwKICAgICAgICAgICAgZm9sZGVyPVRydWUsCiAgICAgICAgICAgIGljb249eGJtY2FkZG9uLkFkZG9uKCkuZ2V0QWRkb25JbmZvKCJpY29uIiksCiAgICAgICAgICAgIGZhbmFydD14Ym1jYWRkb24uQWRkb24oKS5nZXRBZGRvbkluZm8oImZhbmFydCIpLAogICAgICAgICAgICBjb250ZW50X3R5cGU9IiIpCiAgICAgICAga29kaW5nLkFkZF9EaXIoCiAgICAgICAgICAgIG5hbWU9XygiVGVzdGluZ3MiKSwKICAgICAgICAgICAgdXJsPSd7ImZpbGVfbmFtZSI6InRlc3RpbmdzLnhtbCJ9JywKICAgICAgICAgICAgbW9kZT0iVGVzdGluZ3MiLAogICAgICAgICAgICBmb2xkZXI9VHJ1ZSwKICAgICAgICAgICAgaWNvbj14Ym1jYWRkb24uQWRkb24oKS5nZXRBZGRvbkluZm8oImljb24iKSwKICAgICAgICAgICAgZmFuYXJ0PXhibWNhZGRvbi5BZGRvbigpLmdldEFkZG9uSW5mbygiZmFuYXJ0IiksCiAgICAgICAgICAgIGNvbnRlbnRfdHlwZT0iIikKICAgIGlmIGVuYWJsZV9pbnN0YWxsYSA9PSd0cnVlJzoKICAgICAgICBrb2RpbmcuQWRkX0RpcihuYW1lPSdEb3dubG9hZCBCYWNrZ3JvdW5kcycsIHVybD0neyJteV90ZXh0IjoiSU5TVEFMTEFbQ1JdISEhIiwibXlfZGVzYyI6IiJ9JywgbW9kZT0nZGlhbG9nX3NwZWNpZmljJywgZm9sZGVyPUZhbHNlLCBpY29uPW9zLnBhdGguam9pbihhcnRfcGF0aCwnaWNvbi5wbmcnKSwgZmFuYXJ0PW9zLnBhdGguam9pbihhcnRfcGF0aCwnZmFuYXJ0LmpwZycpKQoKCkByb3V0ZShtb2RlPSdnZXRfbGlzdF91bmNhY2hlZCcsIGFyZ3M9WyJ1cmwiXSkKZGVmIGdldF9saXN0X3VuY2FjaGVkKHVybCk6CiAgICAiIiJkaXNwbGF5IGplbiBsaXN0IHVuY2FjaGVkIiIiCiAgICBnbG9iYWwgY29udGVudF90eXBlCiAgICBqZW5fbGlzdCA9IEplbkxpc3QodXJsLCBjYWNoZWQ9RmFsc2UpCiAgICBpZiBub3QgamVuX2xpc3Q6CiAgICAgICAga29kaW5nLmRvbG9nKF8oInJldHVybmVkIGVtcHR5IGZvciAiKSArIHVybCkKICAgIGl0ZW1zID0gamVuX2xpc3QuZ2V0X2xpc3QoKQogICAgY29udGVudCA9IGplbl9saXN0LmdldF9jb250ZW50X3R5cGUoKQogICAgaWYgaXRlbXMgPT0gW106CiAgICAgICAgcmV0dXJuIEZhbHNlCiAgICBpZiBjb250ZW50OgogICAgICAgIGNvbnRlbnRfdHlwZSA9IGNvbnRlbnQKICAgIGRpc3BsYXlfbGlzdChpdGVtcywgY29udGVudF90eXBlKQogICAgcmV0dXJuIFRydWUKCgpAcm91dGUobW9kZT0iZ2V0X2xpc3QiLCBhcmdzPVsidXJsIl0pCmRlZiBnZXRfbGlzdCh1cmwpOgogICAgIiIiZGlzcGxheSBqZW4gbGlzdCIiIgogICAgZ2xvYmFsIGNvbnRlbnRfdHlwZQogICAgamVuX2xpc3QgPSBKZW5MaXN0KHVybCkKICAgIGlmIG5vdCBqZW5fbGlzdDoKICAgICAgICBrb2RpbmcuZG9sb2coXygicmV0dXJuZWQgZW1wdHkgZm9yICIpICsgdXJsKQogICAgaXRlbXMgPSBqZW5fbGlzdC5nZXRfbGlzdCgpCiAgICBjb250ZW50ID0gamVuX2xpc3QuZ2V0X2NvbnRlbnRfdHlwZSgpCiAgICBpZiBpdGVtcyA9PSBbXToKICAgICAgICByZXR1cm4gRmFsc2UKICAgIGlmIGNvbnRlbnQ6CiAgICAgICAgY29udGVudF90eXBlID0gY29udGVudAogICAgZGlzcGxheV9saXN0KGl0ZW1zLCBjb250ZW50X3R5cGUpCiAgICByZXR1cm4gVHJ1ZQoKCkByb3V0ZShtb2RlPSJhbGxfZXBpc29kZXMiLCBhcmdzPVsidXJsIl0pCmRlZiBhbGxfZXBpc29kZXModXJsKToKICAgIGdsb2JhbCBjb250ZW50X3R5cGUKICAgIGltcG9ydCBwaWNrbGUKICAgIGltcG9ydCB4Ym1jZ3VpCiAgICBzZWFzb25fdXJscyA9IHBpY2tsZS5sb2Fkcyh1cmwpCiAgICByZXN1bHRfaXRlbXMgPSBbXQogICAgZGlhbG9nID0geGJtY2d1aS5EaWFsb2dQcm9ncmVzcygpCiAgICBkaWFsb2cuY3JlYXRlKGFkZG9uX25hbWUsIF8oIkxvYWRpbmcgaXRlbXMiKSkKICAgIG51bV91cmxzID0gbGVuKHNlYXNvbl91cmxzKQogICAgZm9yIGluZGV4LCBzZWFzb25fdXJsIGluIGVudW1lcmF0ZShzZWFzb25fdXJscyk6CiAgICAgICAgaWYgZGlhbG9nLmlzY2FuY2VsZWQoKToKICAgICAgICAgICAgYnJlYWsKICAgICAgICBwZXJjZW50ID0gKChpbmRleCArIDEpICogMTAwKSAvIG51bV91cmxzCiAgICAgICAgZGlhbG9nLnVwZGF0ZShwZXJjZW50LCBfKCJwcm9jZXNzaW5nIGxpc3RzIiksIF8oIiVzIG9mICVzIikgJSAoCiAgICAgICAgICAgIGluZGV4ICsgMSwKICAgICAgICAgICAgbnVtX3VybHMpKQoKICAgICAgICBqZW5fbGlzdCA9IEplbkxpc3Qoc2Vhc29uX3VybCkKICAgICAgICByZXN1bHRfaXRlbXMuZXh0ZW5kKGplbl9saXN0LmdldF9saXN0KHNraXBfZGlhbG9nPVRydWUpKQogICAgY29udGVudF90eXBlID0gImVwaXNvZGVzIgogICAgZGlzcGxheV9saXN0KHJlc3VsdF9pdGVtcywgImVwaXNvZGVzIikKCgpAcm91dGUobW9kZT0iU2V0dGluZ3MiKQpkZWYgc2V0dGluZ3MoKToKICAgIHhibWNhZGRvbi5BZGRvbigpLm9wZW5TZXR0aW5ncygpCgoKQHJvdXRlKG1vZGU9IlNjcmFwZXJTZXR0aW5ncyIpCmRlZiBzY3JhcGVyX3NldHRpbmdzKCk6CiAgICB4Ym1jYWRkb24uQWRkb24oJ3NjcmlwdC5tb2R1bGUudW5pdmVyc2Fsc2NyYXBlcnMnKS5vcGVuU2V0dGluZ3MoKQoKCkByb3V0ZShtb2RlPSJSZXNvbHZlclNldHRpbmdzIikKZGVmIHJlc29sdmVyX3NldHRpbmdzKCk6CiAgICB4Ym1jYWRkb24uQWRkb24oJ3NjcmlwdC5tb2R1bGUucmVzb2x2ZXVybCcpLm9wZW5TZXR0aW5ncygpCgoKQHJvdXRlKG1vZGU9IkNsZWFyVHJha3RBY2NvdW50IikKZGVmIGNsZWFyX3RyYWt0X2FjY291bnQoKToKICAgIGltcG9ydCB4Ym1jZ3VpCiAgICBpZiB4Ym1jZ3VpLkRpYWxvZygpLnllc25vKGFkZG9uX25hbWUsICJ7MH0gVHJha3QgezF9LiB7Mn0iLmZvcm1hdChfKCJEZWxldGUiKSwgXygiU2V0dGluZ3MiKS5sb3dlcigpLCBfKCJBcmUgeW91IHN1cmU/IikpKToKICAgICAgICB4Ym1jYWRkb24uQWRkb24oKS5zZXRTZXR0aW5nKCJUUkFLVF9FWFBJUkVTX0FUIiwgIiIpCiAgICAgICAgeGJtY2FkZG9uLkFkZG9uKCkuc2V0U2V0dGluZygiVFJBS1RfQUNDRVNTX1RPS0VOIiwgIiIpCiAgICAgICAgeGJtY2FkZG9uLkFkZG9uKCkuc2V0U2V0dGluZygiVFJBS1RfUkVGUkVTSF9UT0tFTiIsICIiKQoKCkByb3V0ZShtb2RlPSJtZXNzYWdlIiwgYXJncz1bInVybCJdKQpkZWYgc2hvd19tZXNzYWdlKG1lc3NhZ2UpOgogICAgaW1wb3J0IHhibWNndWkKICAgIGlmIGxlbihtZXNzYWdlKSA+IDgwOgogICAgICAgIGtvZGluZy5UZXh0X0JveChhZGRvbl9uYW1lLCBtZXNzYWdlKQogICAgZWxzZToKICAgICAgICB4Ym1jZ3VpLkRpYWxvZygpLm9rKGFkZG9uX25hbWUsIG1lc3NhZ2UpCgoKQHJvdXRlKCdjbGVhckNhY2hlJykKZGVmIGNsZWFyX2NhY2hlKCk6CiAgICBpbXBvcnQgeGJtY2d1aQogICAgZGlhbG9nID0geGJtY2d1aS5EaWFsb2coKQogICAgaWYgZGlhbG9nLnllc25vKGFkZG9uX25hbWUsIF8oIkNsZWFyIE1ldGFkYXRhPyIpKToKICAgICAgICBrb2RpbmcuUmVtb3ZlX1RhYmxlKCJtZXRhIikKICAgICAgICBrb2RpbmcuUmVtb3ZlX1RhYmxlKCJlcGlzb2RlX21ldGEiKQogICAgaWYgZGlhbG9nLnllc25vKGFkZG9uX25hbWUsIF8oIkNsZWFyIFNjcmFwZXIgQ2FjaGU/IikpOgogICAgICAgIGltcG9ydCB1bml2ZXJzYWxzY3JhcGVycwogICAgICAgIHVuaXZlcnNhbHNjcmFwZXJzLmNsZWFyX2NhY2hlKCkKICAgIGlmIGRpYWxvZy55ZXNubyhhZGRvbl9uYW1lLCBfKCJDbGVhciBHSUYgQ2FjaGU/IikpOgogICAgICAgIGRlc3RfZm9sZGVyID0gb3MucGF0aC5qb2luKAogICAgICAgICAgICB4Ym1jLnRyYW5zbGF0ZVBhdGgoeGJtY2FkZG9uLkFkZG9uKCkuZ2V0U2V0dGluZygiY2FjaGVfZm9sZGVyIikpLAogICAgICAgICAgICAiYXJ0Y2FjaGUiKQogICAgICAgIGtvZGluZy5EZWxldGVfRm9sZGVycyhkZXN0X2ZvbGRlcikKICAgIHhibWMubG9nKCJydW5uaW5nIGhvb2s6IiwgeGJtYy5MT0dOT1RJQ0UpCiAgICBydW5faG9vaygiY2xlYXJfY2FjaGUiKQoKCmRlZiBnZXRfYWRkb25fdXJsKG1vZGUsIHVybD0iIik6CiAgICBpbXBvcnQgdXJsbGliCiAgICByZXN1bHQgPSBzeXMuYXJndlswXSArICI/bW9kZT0lcyIgJSBtb2RlCgogICAgaWYgdXJsOgogICAgICAgIHJlc3VsdCArPSAiJnVybD0lcyIgJSB1cmxsaWIucXVvdGVfcGx1cyh1cmwpCiAgICByZXR1cm4gcmVzdWx0CgoKZGVmIGZpcnN0X3J1bl93aXphcmQoKToKICAgIHJlc3VsdCA9IHJ1bl9ob29rKCJmaXJzdF9ydW5fd2l6YXJkIikKICAgIGlmIHJlc3VsdDoKICAgICAgICByZXR1cm4KCgojIGtvZGluZy5Vc2VyX0luZm8oKQppZiB4Ym1jYWRkb24uQWRkb24oKS5nZXRTZXR0aW5nKCJmaXJzdF9ydW4iKSA9PSAidHJ1ZSI6CiAgICBmaXJzdF9ydW5fd2l6YXJkKCkKCmZvbGRlcm5hbWUgPSB4Ym1jLmdldEluZm9MYWJlbCgiQ29udGFpbmVyLkZvbGRlck5hbWUiKQppZiBmb2xkZXJuYW1lIGluIFsiIiwgInBsdWdpbi5wcm9ncmFtLnN1cGVyLmZhdm91cml0ZXMiXToKICAgIF9fYnVpbHRpbl9fLkpFTl9XSURHRVQgPSBUcnVlCmVsc2U6CiAgICBfX2J1aWx0aW5fXy5KRU5fV0lER0VUID0gRmFsc2UKCnhibWNwbHVnaW4uYWRkU29ydE1ldGhvZChpbnQoc3lzLmFyZ3ZbMV0pLCB4Ym1jcGx1Z2luLlNPUlRfTUVUSE9EX05PTkUpCnhibWNwbHVnaW4uYWRkU29ydE1ldGhvZChpbnQoc3lzLmFyZ3ZbMV0pLCB4Ym1jcGx1Z2luLlNPUlRfTUVUSE9EX0xBQkVMKQoKcm91dGVyLlJ1bigpCgp4Ym1jcGx1Z2luLmVuZE9mRGlyZWN0b3J5KGludChzeXMuYXJndlsxXSksIGNhY2hlVG9EaXNjPUZhbHNlKQp0cnk6CiAgICBjb250ZW50X3R5cGUgPSBfX2J1aWx0aW5fXy5jb250ZW50X3R5cGUKZXhjZXB0OgogICAgcGFzcwppZiBub3QgeGJtY2FkZG9uLkFkZG9uKCkuZ2V0U2V0dGluZygiZmlyc3RfcnVuIikgPT0gInRydWUiOgogICAgaWYgY29udGVudF90eXBlID09ICJmaWxlcyI6CiAgICAgICAgY29udGVudF90eXBlID0gIm90aGVyIgogICAgcmVzb3VyY2VzLmxpYi51dGlsLnZpZXdzLnNldF9saXN0X3ZpZXdfbW9kZShjb250ZW50X3R5cGUpCg==')
